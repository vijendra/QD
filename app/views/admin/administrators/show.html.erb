<% content_for :header do -%>
 	<%= configatron.site_name %> Account for <em><%=h @administrator.login %></em>
<% end -%>

<% content_for :sidebar do -%>

<h2>Account status: <%= @administrator.state.to_s.humanize %></h2>

<ul>
	<% if @administrator.pending? -%>
		<li><%= link_to "Activate", activate_admin_administrator_url(@administrator), :method => :put %></li>
		<li><%= link_to "Suspend", suspend_admin_administrator_url(@administrator), :method => :put %></li>
		<li><%= link_to "Delete", admin_administrator_url(@administrator), :method => :delete %></li>
	<% end -%>

	<% if @administrator.suspended? -%>
		<li><%= link_to "Unsuspend", unsuspend_admin_administrator_url(@administrator), :method => :put %></li>
	<% end -%>

	<% if @administrator.active? -%>
		<li><%= link_to "Suspend", suspend_admin_administrator_url(@administrator), :method => :put %></li>
		<li><%= link_to "Delete", admin_administrator_url(@administrator), :method => :delete, :confirm => "Are you sure you want to delete this account?" %></li>
	<% end -%>

	<% # TODO: Uncomment to enable user purging by the administrator %>
	<!--
	<% if @administrator.deleted? -%>
		<li><%= link_to "Purge", purge_admin_administrator_url(@administrator), :method => :delete, :confirm => "Are you sure you want to remove this account, and all data associated with it from base_app?" %></li>
	<% end -%>
    -->
</ul>
<% end -%>

<table class="overview">
	<%= cell "Login", "#{in_place_editor_field :administrator, 'login'}" %>
	<%= cell "User ID", h(@administrator.id) %>

	<%= cell_separator %>

	<%= cell "Email", "#{in_place_editor_field :administrator, 'email'}" %>
	<%= cell "Password", "#{"*"*8} <small>#{link_to_if !@administrator.deleted?, "send new password", reset_password_admin_administrator_url(@administrator), :method => :put}</small>" %>

	<%= cell_separator %>

	<%= cell "Account created", @administrator.created_at.to_s(:long) %>
	<%= cell "Last updated", @administrator.updated_at.to_s(:long) %>
</table>

<%= link_to 'Edit', edit_admin_administrator_path(@administrator) %> |
<%= link_to 'Back', admin_administrators_path %>
